- Used to enumerate information on a running system 
- Identifying specific service version running on a port
- Can be used via nmap, netcat, or connection


#### Banner Grabbing with NMAP

Scan target services and operating system
```
nmap -sV -O <target_ip>
```

Nmap script for banner scanning
```
ls -al /usr/share/nmap/scripts | grep banner

nmap -sV --script=banner <target_ip>
```

#### Banner Grabbing with Netcat

Connect to port over netcat
```
whatis nc
nc <target_ip> <port>
```

#### Grabbing Banners with Service Authentication 

```
ssh <username>@<target_ip>
```

## Quiz

Which one of the following commands will enable verbose output with Netcat?

	nc -v 192.168.1.1 21

## Lab

In this challenge we will look at the basics of SSH server reconnaissance. Please start the lab and answer the following questions:

```
192.107.39.2
192.107.39.3
```

Questions

1. What is the version of SSH server.
```
 nmap  --script=banner 192.107.39.3

22/tcp open  ssh
|_banner: SSH-2.0-OpenSSH_7.2p2 Ubuntu-4ubuntu2.6
MAC Address: 02:42:C0:6B:27:03 (Unknown)
```
   
2. Fetch the banner using netcat and check the version of SSH server.
```
nc -v 192.107.39.3 22 

target-1 [192.107.39.3] 22 (ssh) open
SSH-2.0-OpenSSH_7.2p2 Ubuntu-4ubuntu2.6
```
   
3. Fetch pre-login SSH banner.
```
ssh root@192.107.39.3

Welcome to attack defense ssh recon lab!!
```   
   
4. How many “encryption_algorithms” are supported by the SSH server.
```
nmap -sV --script=ssh2-enum-algos 192.107.39.3

chacha20-poly1305@openssh.com
|       aes128-ctr
|       aes192-ctr
|       aes256-ctr
|       aes128-gcm@openssh.com
|       aes256-gcm@openssh.com
```  
   
5. What is the ssh-rsa host key being used by the SSH server.
```
nmap -sV --script=ssh-hostkey 192.107.39.3

| ssh-hostkey: 
|   2048 b0:2b:8d:3e:4c:de:f9:ab:7f:86:47:fd:c8:d2:e0:a8 (RSA)
|   256 75:6f:7d:4e:d7:f7:6d:ec:23:d1:8e:39:76:94:86:8a (ECDSA)
|_  256 58:16:43:a6:65:2c:0b:0a:22:60:86:31:6f:59:38:12 (ED25519)
MAC Address: 02:42:C0:6B:27:03 (Unknown)   
```  
   
6. Which authentication method is being used by the SSH server for user “student”.
```
 nmap --script=ssh-auth-methods --script-args="ssh.user=student" 192.107.39.3

22/tcp open  ssh
| ssh-auth-methods: 
|_  Supported authentication methods: none_auth
```
   
7. Which authentication method is being used by the SSH server for user “admin”.
```
nmap --script=ssh-auth-methods --script-args="ssh.user=admin" 192.107.39.3   

| ssh-auth-methods: 
|   Supported authentication methods: 
|     publickey
|_    password
``` 
   
8. Fetch the flag from /home/student/FLAG by using nmap ssh-run script.
```
e1e3c0c9d409f594afdb18fe9ce0ffec
```

Instructions: 

- This lab is dedicated to you! No other users are on this network :)
- Once you start the lab, you will have access to a root terminal of a Kali instance
- Your Kali has an interface with IP address 192.X.Y.Z. Run "ip addr" to know the values of X and Y.
- The Target machine should be located at the IP address 192.X.Y.3.
- Do not attack the gateway located at IP address 192.X.Y.1